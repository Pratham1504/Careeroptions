<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Options for Prarthna ‚Äî Career Explorer</title>
  <meta name="description" content="Interactive career explorer for final-year BA-LLB students. Explore options, mark interest, review and export your choices. Mobile-first and offline-friendly." />
  <style>
    :root{
      --bg:#071227; --card:#081428; --muted:#98a0b3; --accent:#6ee7b7; --accent-2:#7dd3fc; --glass: rgba(255,255,255,0.03);
      --glass-2: rgba(255,255,255,0.02); --glass-border: rgba(255,255,255,0.04);
      --max-width:1080px; --radius:14px; --transition:220ms;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#021223 0%, #071227 60%);color:#e6eef6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    .wrap{max-width:var(--max-width);margin:18px auto;padding:18px;border-radius:12px}

    .container{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:var(--radius);border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 40px rgba(2,6,23,0.6)}

    header{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700;color:#012;font-size:20px}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .hero{display:flex;gap:18px;align-items:center;justify-content:space-between;margin-top:12px}
    .hero-left{flex:1}
    .hero-right{width:320px}
    .cta{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
    .btn{background:transparent;border:1px solid var(--glass-border);padding:10px 14px;border-radius:10px;color:var(--accent);cursor:pointer;font-weight:600;font-size:14px;transition:all var(--transition)}
    .btn:hover{background:rgba(110,231,183,0.1);transform:translateY(-2px)}
    .btn.ghost{color:var(--muted)}
    .btn.ghost:hover{background:rgba(255,255,255,0.05)}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#012;border:none}
    .btn.primary:hover{box-shadow:0 4px 12px rgba(110,231,183,0.3)}

    /* Theme toggle */
    .theme-toggle{display:flex;gap:4px;background:var(--glass-2);padding:4px;border-radius:8px}
    .theme-toggle button{padding:6px 12px;border:none;background:transparent;color:var(--muted);border-radius:6px;cursor:pointer;transition:all var(--transition)}
    .theme-toggle button.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#012}

    /* Main content */
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px}
    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
    .card{background:var(--card);padding:14px;border-radius:12px;border:1px solid var(--glass-border);transition:transform var(--transition),box-shadow var(--transition);cursor:pointer;position:relative;overflow:hidden}
    .card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent),var(--accent-2));transform:scaleX(0);transition:transform var(--transition)}
    .card:hover::before{transform:scaleX(1)}
    .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(2,6,23,0.65)}
    .card h3{margin:0 0 6px 0}
    .card .muted{color:var(--muted);font-size:13px}
    .tag{display:inline-block;padding:6px 8px;border-radius:8px;background:var(--glass-2);font-size:12px;margin-top:8px}
    .tag.interested{background:linear-gradient(90deg,rgba(110,231,183,0.2),rgba(125,211,252,0.2));color:var(--accent)}
    .tag.review{background:rgba(251,191,36,0.2);color:#fbbf24}

    aside{position:relative}
    .panel{position:sticky;top:18px;padding:12px}
    .progress{height:12px;background:var(--glass-2);border-radius:8px;overflow:hidden;margin-top:8px;position:relative}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%;transition:width 0.5s ease}

    .list{margin-top:12px;display:flex;flex-direction:column;gap:8px}
    .list .item{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:8px;background:rgba(0,0,0,0.12);transition:all var(--transition)}
    .list .item:hover{background:rgba(0,0,0,0.2)}

    /* Single explorer */
    .explorer{display:none;gap:12px;align-items:flex-start}
    .explorer .details{flex:1}
    .explorer .nav{width:360px}
    .meta{color:var(--muted);font-size:13px;margin-top:6px}
    .proscons{display:flex;gap:10px;margin-top:12px}
    .pc{flex:1;padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02)}
    .actions{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}

    /* Comparison view */
    .compare-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:12px;margin-top:12px}
    .compare-card{background:var(--card);padding:14px;border-radius:12px;border:1px solid var(--glass-border)}

    /* Timeline view */
    .timeline{margin-top:12px}
    .timeline-item{display:flex;gap:12px;margin-bottom:16px;position:relative}
    .timeline-item::before{content:'';position:absolute;left:12px;top:30px;bottom:-16px;width:2px;background:var(--glass-border)}
    .timeline-item:last-child::before{display:none}
    .timeline-dot{width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-2));flex-shrink:0;display:flex;align-items:center;justify-content:center;color:#012;font-weight:700;font-size:12px}
    .timeline-content{flex:1;background:var(--glass-2);padding:10px;border-radius:8px}

    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}

    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,10,0.8);z-index:9999;backdrop-filter:blur(4px)}
    .modal .box{width:720px;max-width:96%;background:linear-gradient(180deg,#071827,#04101a);padding:18px;border-radius:12px;border:1px solid var(--glass-border);max-height:90vh;overflow-y:auto}

    /* Toast */
    .toast{position:fixed;right:18px;bottom:18px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#012;padding:12px 16px;border-radius:8px;font-weight:600;z-index:9999;box-shadow:0 8px 24px rgba(0,0,0,0.4);animation:slideIn 0.3s ease}
    @keyframes slideIn{from{transform:translateY(100px);opacity:0}to{transform:translateY(0);opacity:1}}

    /* Light theme */
    body.light{background:linear-gradient(180deg,#f0f4f8 0%, #e2e8f0 60%);color:#1e293b}
    body.light .container{background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.8));border:1px solid rgba(0,0,0,0.08)}
    body.light .card{background:#fff;border:1px solid rgba(0,0,0,0.08)}
    body.light .btn{color:#059669;border-color:rgba(0,0,0,0.1)}
    body.light .btn.ghost{color:#64748b}
    body.light .logo{background:linear-gradient(135deg,#059669,#0891b2)}
    body.light .muted, body.light .lead, body.light .small{color:#64748b}

    @media (max-width:980px){
      .hero{flex-direction:column;align-items:flex-start}
      .hero-right{width:100%}
      .grid{grid-template-columns:1fr}
      .explorer{flex-direction:column}
      .explorer .nav{width:100%}
      .compare-grid{grid-template-columns:1fr}
    }

    @media (max-width:520px){
      .wrap{padding:12px}
      .card{padding:12px}
      .logo{width:48px;height:48px}
      .btn{padding:10px 12px;font-size:13px}
      header{flex-direction:column;align-items:flex-start}
    }

    .small{font-size:12px;color:var(--muted)}
    .hidden{display:none}
    .pill{display:inline-block;padding:8px 10px;border-radius:999px;background:rgba(255,255,255,0.03);font-weight:600}

    /* Swipe indicator */
    .swipe-hint{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.7);padding:8px 16px;border-radius:20px;font-size:12px;animation:bounce 2s infinite;z-index:1000}
    @keyframes bounce{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-10px)}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div style="display:flex;gap:12px;align-items:center">
        <div class="logo">P</div>
        <div>
          <h1>Options for Prarthna</h1>
          <p class="lead">Interactive career explorer for BA-LLB final year ‚Äî mobile friendly and offline.</p>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
        <div class="theme-toggle">
          <button id="darkTheme" class="active">Dark</button>
          <button id="lightTheme">Light</button>
        </div>
        <button class="btn ghost" id="importBtn">Import</button>
        <button class="btn ghost" id="resetBtn">Reset</button>
        <button class="btn primary" id="startBtn">Explore Options</button>
      </div>
    </header>

    <section class="container hero" id="landing">
      <div class="hero-left">
        <h2 style="margin:0">Welcome, Prarthna ‚Äî find your next step after BA-LLB</h2>
        <p class="small" style="margin-top:8px">Explore carefully curated career options, read pros/cons, see concrete next steps, and mark ones you're interested in. Use the single-option explorer for a focused walkthrough.</p>

        <div class="cta">
          <button class="btn primary" id="beginBtn">Start Guided Explorer</button>
          <button class="btn" id="skipBtn">Browse All Options</button>
          <div style="margin-left:12px" class="small">Progress saved locally in your browser.</div>
        </div>

        <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
          <div class="pill">9 options</div>
          <div class="pill">Offline-ready</div>
          <div class="pill">Export CSV/JSON</div>
          <div class="pill">Dark/Light theme</div>
        </div>
      </div>
      <div class="hero-right">
        <div style="background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)">
          <h3 style="margin:0">Why use this?</h3>
          <ul class="small" style="margin-top:8px">
            <li>Gives clarity and concrete actions.</li>
            <li>Helps prioritize options with a simple dashboard.</li>
            <li>Compare options side-by-side.</li>
            <li>Prepared for mobile interviews and quick decisions.</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="main" class="grid hidden">
      <div>
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
          <input id="search" placeholder="Search options (litigation, LLM, judicial...)" style="flex:1;min-width:200px;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.02);color:inherit" />
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="viewListBtn">Cards</button>
            <button class="btn" id="compareBtn">Compare</button>
            <button class="btn" id="startExplorerBtn">Explorer</button>
            <button class="btn primary" id="exportBtn">Export</button>
          </div>
        </div>

        <div id="cardsWrap" style="margin-top:12px">
          <div class="cards" id="cards"></div>
        </div>

        <!-- Comparison view -->
        <div id="compareView" class="hidden" style="margin-top:12px">
          <div class="container">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
              <h3 style="margin:0">Compare Selected Options</h3>
              <button class="btn" id="closeCompare">Close</button>
            </div>
            <div class="compare-grid" id="compareGrid"></div>
          </div>
        </div>

        <!-- Single explorer view -->
        <div id="explorer" class="explorer container hidden" style="margin-top:12px">
          <div class="details container" id="expDetails"></div>
          <div class="nav container" id="expNav">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><strong id="expCount">1 / 9</strong></div>
              <div class="small">Select status:</div>
            </div>
            <div style="margin-top:10px;display:flex;gap:8px">
              <button class="btn" id="markReview">For Review</button>
              <button class="btn primary" id="markInterest">Interested</button>
            </div>
            <div style="margin-top:12px">
              <h4 style="margin:6px 0">Timeline Actions</h4>
              <div id="timelineView" class="timeline"></div>
            </div>
            <div style="margin-top:12px;display:flex;gap:8px">
              <button class="btn" id="prevBtn">‚Üê Previous</button>
              <button class="btn primary" id="nextBtn">Next ‚Üí</button>
            </div>
          </div>
        </div>
      </div>

      <aside>
        <div class="panel container">
          <h3 style="margin:0">Your Dashboard</h3>
          <div class="small">Snapshot of selections</div>
          <div class="progress"><i id="progBar"></i></div>
          <div style="display:flex;justify-content:space-between;margin-top:8px"><div class="small">Selected</div><div class="small" id="selCount">0 / 9</div></div>

          <div style="margin-top:12px">
            <h4 style="margin:6px 0">Selections</h4>
            <div id="selList" class="list"></div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="clearBtn">Clear</button>
            <button class="btn" id="exportJsonBtn">JSON</button>
          </div>
          <div style="margin-top:10px" class="small">Selections stored locally (private to this browser).</div>
        </div>
      </aside>
    </section>

    <footer>
      <small>Built for Prarthna ‚Ä¢ Local-first ‚Ä¢ Works on mobile and desktop ‚Ä¢ Swipe to navigate</small>
    </footer>
  </div>

  <div id="modal" class="modal hidden" aria-hidden="true"></div>
  <div id="swipeHint" class="swipe-hint hidden">‚Üê Swipe to navigate ‚Üí</div>

  <script>
    /* DATA */
    const OPTIONS = [
      {
        id: 'litigation',
        title: 'Litigation / Advocacy',
        type: 'practice',
        short: 'Courtroom practice, trials, advocacy',
        details: 'Litigation involves representing clients in courts, drafting pleadings, preparing arguments, and learning direct advocacy. It is a high-learning, high-pressure field ideal for someone who enjoys real-time problem solving and courtroom strategy. Juniors typically start with drafting, research, filing, and observing seniors in court.',
        pros: ['Fastest legal learning curve', 'High independence long-term', 'Deep understanding of procedure & evidence', 'Networking with judges and senior advocates'],
        cons: ['Low/unstable income initially', 'Long working hours', 'High pressure & unpredictable schedules'],
        actions: ['Take drafting-heavy internships', 'Specialize early (criminal/civil/ADR)', 'Follow judgments daily from SC/HC', 'Maintain case-notes journal', 'Shadow seniors in trials']
      },
      {
        id: 'corporate',
        title: 'Corporate / Transactional Practice',
        type: 'corporate',
        short: 'Contracts, M&A, compliance',
        details: 'Corporate law deals with structuring business transactions, drafting and negotiating contracts, advising companies on legal risks, ensuring compliance, and managing due diligence. Juniors work on contracts, research, and assisting in transactions.',
        pros: ['Good salary from the start', 'Structured corporate environment', 'Business exposure', 'Opportunities in large firms'],
        cons: ['Document-heavy work early in career', 'Long hours in top law firms', 'Less courtroom work'],
        actions: ['Master contract drafting', 'Learn M&A basics & company law', 'Intern at corporate law firms', 'Build a drafting portfolio', 'Learn basic finance']
      },
      {
        id: 'llm',
        title: 'LLM (India / Abroad)',
        type: 'academic',
        short: 'Specialize in law ‚Äî advanced degree',
        details: 'LLM is suited for those who want specialization, international exposure, or future academic roles. It is especially useful for careers in academia, policy, international law, arbitration, taxation, or niche corporate fields.',
        pros: ['Specialized knowledge', 'Academic advancement', 'Global recognition (foreign LLM)', 'Stronger profile for think tanks'],
        cons: ['High cost for foreign LLMs', 'Not necessary for litigation', 'Admissions require strong SOP'],
        actions: ['Pick specialization early', 'Publish articles', 'Prepare SOP & collect LORs', 'Shortlist 6‚Äì8 universities', 'Apply for scholarships early']
      },
      {
        id: 'judicial',
        title: 'Judicial Services',
        type: 'practice',
        short: 'State judiciary / magistrate exams',
        details: 'Judicial Services is the pathway to becoming a Civil Judge / Judicial Magistrate. It requires deep knowledge of procedural and substantive law along with disciplined preparation. Excellent for those seeking prestige, stability and public service.',
        pros: ['Highly respected role', 'Stable government career', 'Direct role in justice system', 'Clear promotion ladder'],
        cons: ['Very competitive exams', 'Requires 1‚Äì2 years of prep', 'High syllabus volume'],
        actions: ['Daily reading of bare acts', 'Solve 10 years of PYQs', 'Join test series', 'Focus on writing practice', 'Keep notes subject-wise']
      },
      {
        id: 'govt',
        title: 'Government / Legal Aid / NGOs',
        type: 'public',
        short: 'Policy, public law, legal aid',
        details: 'Government and NGO roles include working in commissions, ministries, legal aid cells, and public policy organizations. Work ranges from drafting reports, doing research, preparing recommendations, and field visits. Ideal for societal impact.',
        pros: ['High social impact', 'Exposure to policy', 'Work-life balance', 'Opportunities with UN bodies'],
        cons: ['Moderate salary', 'Competitive hiring', 'Fewer openings'],
        actions: ['Volunteer with legal aid cells', 'Apply to govt internships', 'Publish policy briefs', 'Develop writing portfolio']
      },
      {
        id: 'inhouse',
        title: 'In-House Counsel / Compliance',
        type: 'corporate',
        short: 'Corporate legal teams, compliance',
        details: 'In-house counsel work directly inside companies, advising business teams, drafting contracts, ensuring legal compliance, managing disputes, and collaborating with external law firms. Perfect for predictable hours and business exposure.',
        pros: ['Better work-life balance', 'Steady compensation', 'Long-term stability', 'Business + legal exposure'],
        cons: ['Most roles require 1‚Äì2 years experience', 'Less pure lawyering'],
        actions: ['Learn privacy & compliance', 'Take compliance certifications', 'Build Excel skills', 'Intern in corporate legal teams']
      },
      {
        id: 'research',
        title: 'Research & Academia / Think-tanks',
        type: 'academic',
        short: 'Research, teaching, policy work',
        details: 'Research roles involve academic writing, assisting professors, policy analysis, creating reports, and conducting legal studies. Ideal for those who enjoy reading, writing, teaching, and want a PhD/academic path.',
        pros: ['Intellectual satisfaction', 'Publications & academic profile', 'Path to teaching/PhD', 'Work with top researchers'],
        cons: ['Lower initial salary', 'Competitive selection'],
        actions: ['Write articles & research papers', 'Assist professors', 'Build writing samples', 'Prepare for UGC NET']
      },
      {
        id: 'legaltech',
        title: 'Legal Tech / Startups / Consulting',
        type: 'corporate',
        short: 'Product and tech-driven legal roles',
        details: 'LegalTech involves using technology to solve legal problems ‚Äî contract automation, legal AI, compliance dashboards. Suited for those who enjoy technology, design, operations, or business-building.',
        pros: ['Fast-growing industry', 'High salary in product roles', 'Creative work', 'Remote-friendly'],
        cons: ['Requires tech-business understanding', 'Learning curve for tools'],
        actions: ['Learn no-code tools', 'Understand contract automation', 'Work with startups', 'Build mini legal tools']
      },
      {
        id: 'special',
        title: 'Special Routes: Arbitration / Mediation / Patent',
        type: 'practice',
        short: 'Alternate dispute resolution & IP',
        details: 'Specialized verticals: Arbitration for commercial disputes, Mediation for conflict resolution, Patent Agent for technical IP work. These fields offer high-paying niche roles after experience.',
        pros: ['High specialization', 'Arbitration = excellent income', 'Growing mediation field', 'Patent = niche expertise'],
        cons: ['Requires years to build credibility', 'Patent needs science background'],
        actions: ['Do Arbitration/Mediation courses', 'Work under arbitrators', 'Prepare for Patent Agent exam if eligible']
      }
    ];

    const KEY = 'prarthna_career_v3';
    let selections = loadSelections();
    let explorerIndex = 0;
    let mode = 'cards';
    let touchStartX = 0;
    let touchEndX = 0;

    // Theme management
    function initTheme() {
      const savedTheme = localStorage.getItem('prarthna_theme') || 'dark';
      if (savedTheme === 'light') {
        document.body.classList.add('light');
        document.getElementById('lightTheme').classList.add('active');
        document.getElementById('darkTheme').classList.remove('active');
      }
    }

    document.getElementById('darkTheme').addEventListener('click', () => {
      document.body.classList.remove('light');
      document.getElementById('darkTheme').classList.add('active');
      document.getElementById('lightTheme').classList.remove('active');
      localStorage.setItem('prarthna_theme', 'dark');
    });

    document.getElementById('lightTheme').addEventListener('click', () => {
      document.body.classList.add('light');
      document.getElementById('lightTheme').classList.add('active');
      document.getElementById('darkTheme').classList.remove('active');
      localStorage.setItem('prarthna_theme', 'light');
    });

    // Touch gestures for mobile
    function initSwipeGestures() {
      const explorer = document.getElementById('explorer');
      explorer.addEventListener('touchstart', e => {
        touchStartX = e.changedTouches[0].screenX;
      });
      explorer.addEventListener('touchend', e => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
      });
    }

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;
      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0 && explorerIndex < OPTIONS.length - 1) {
          explorerIndex++;
          showExplorerCard();
          showTempToast('Next ‚Üí');
        } else if (diff < 0 && explorerIndex > 0) {
          explorerIndex--;
          showExplorerCard();
          showTempToast('‚Üê Previous');
        }
      }
    }

    function showSwipeHint() {
      const hint = document.getElementById('swipeHint');
      if (window.innerWidth < 768 && mode === 'explorer') {
        hint.classList.remove('hidden');
        setTimeout(() => hint.classList.add('hidden'), 3000);
      }
    }

    // Save/load with versioning
    function loadSelections() {
      try {
        const raw = localStorage.getItem(KEY);
        return raw ? JSON.parse(raw) : {};
      } catch(e) {
        return {};
      }
    }

    function save() {
      localStorage.setItem(KEY, JSON.stringify(selections));
      localStorage.setItem(KEY + '_timestamp', new Date().toISOString());
    }

    // Render cards
    function renderCards(q = '') {
      const cardsEl = document.getElementById('cards');
      cardsEl.innerHTML = '';
      const query = q.trim().toLowerCase();
      OPTIONS.forEach(opt => {
        if (query) {
          const hay = (opt.title + ' ' + opt.short + ' ' + opt.pros.join(' ') + ' ' + opt.cons.join(' ')).toLowerCase();
          if (!hay.includes(query)) return;
        }
        const card = document.createElement('div');
        card.className = 'card';
        const status = selections[opt.id] ?
          '<span class="tag ' + selections[opt.id] + '">' + (selections[opt.id] === 'interested' ? '‚òÖ Interested' : 'üìã Review') + '</span>' : '';
        card.innerHTML = [
          '<h3>' + opt.title + '</h3>',
          '<div class="muted">' + opt.short + '</div>',
          '<div style="margin-top:8px">' + status + '</div>',
          '<div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">',
            '<button class="btn" data-id="' + opt.id + '" data-action="open">View Details</button>',
            '<button class="btn primary" data-id="' + opt.id + '" data-action="toggle">',
              (selections[opt.id] === 'interested' ? '‚òÖ Interested' : selections[opt.id] === 'review' ? 'üìã Review' : '+ Mark'),
            '</button>',
            (selections[opt.id] ? '<button class="btn ghost" data-id="' + opt.id + '" data-action="share">Share</button>' : ''),
          '</div>'
        ].join('');
        cardsEl.appendChild(card);
      });

      document.querySelectorAll('[data-action="toggle"]').forEach(b => {
        b.addEventListener('click', e => {
          e.stopPropagation();
          const id = b.getAttribute('data-id');
          if (selections[id] === 'interested') selections[id] = 'review';
          else if (selections[id] === 'review') delete selections[id];
          else selections[id] = 'interested';
          save();
          renderCards(document.getElementById('search').value);
          renderDashboard();
        });
      });

      document.querySelectorAll('[data-action="open"]').forEach(b => {
        b.addEventListener('click', e => {
          e.stopPropagation();
          const id = b.getAttribute('data-id');
          const idx = OPTIONS.findIndex(o => o.id === id);
          if (idx >= 0) {
            explorerIndex = idx;
            showExplorer();
          }
        });
      });

      document.querySelectorAll('[data-action="share"]').forEach(b => {
        b.addEventListener('click', e => {
          e.stopPropagation();
          const id = b.getAttribute('data-id');
          const opt = OPTIONS.find(o => o.id === id);
          if (opt) shareOption(opt);
        });
      });

      renderDashboard();
    }

    // Dashboard
    function renderDashboard() {
      const selList = document.getElementById('selList');
      const selCount = document.getElementById('selCount');
      const progBar = document.getElementById('progBar');
      selList.innerHTML = '';
      const keys = Object.keys(selections).filter(k => k !== '_notes');
      const total = OPTIONS.length;
      const selected = keys.length;
      selCount.textContent = selected + ' / ' + total;
      const pct = Math.round((selected / total) * 100);
      progBar.style.width = pct + '%';
      keys.forEach(k => {
        const opt = OPTIONS.find(o => o.id === k);
        if (!opt) return;
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = [
          '<div style="display:flex;gap:8px;align-items:center">',
            '<strong>' + opt.title + '</strong>',
            '<div class="small">' + (selections[k] === 'interested' ? '‚òÖ' : 'üìã') + '</div>',
          '</div>',
          '<button class="btn" data-id="' + k + '" data-action="jump">View</button>'
        ].join('');
        selList.appendChild(div);
      });

      document.querySelectorAll('[data-action="jump"]').forEach(b => {
        b.addEventListener('click', () => {
          const id = b.getAttribute('data-id');
          const idx = OPTIONS.findIndex(o => o.id === id);
          if (idx >= 0) {
            explorerIndex = idx;
            showExplorer();
          }
        });
      });
    }

    // Explorer
    function showExplorer() {
      mode = 'explorer';
      document.getElementById('landing').classList.add('hidden');
      document.getElementById('main').classList.remove('hidden');
      document.getElementById('cardsWrap').classList.add('hidden');
      document.getElementById('compareView').classList.add('hidden');
      document.getElementById('explorer').classList.remove('hidden');
      showExplorerCard();
      showSwipeHint();
    }

    function showExplorerCard() {
      const opt = OPTIONS[explorerIndex];
      const expDetails = document.getElementById('expDetails');
      const expCount = document.getElementById('expCount');
      expCount.textContent = (explorerIndex + 1) + ' / ' + OPTIONS.length;
      expDetails.innerHTML = [
        '<h2 style="margin:0">' + opt.title + '</h2>',
        '<div class="meta">' + opt.short + ' ‚Ä¢ Type: ' + opt.type + '</div>',
        '<p style="margin-top:12px;line-height:1.6">' + opt.details + '</p>',
        '<div class="proscons">',
          '<div class="pc"><b>‚úì Pros</b><ul class="small" style="margin-top:8px">' + opt.pros.map(p => '<li>' + p + '</li>').join('') + '</ul></div>',
          '<div class="pc"><b>‚ö† Cons</b><ul class="small" style="margin-top:8px">' + opt.cons.map(p => '<li>' + p + '</li>').join('') + '</ul></div>',
        '</div>'
      ].join('');
      renderTimeline(opt);
    }

    function renderTimeline(opt) {
      const timelineView = document.getElementById('timelineView');
      timelineView.innerHTML = '';
      opt.actions.forEach((action, idx) => {
        const item = document.createElement('div');
        item.className = 'timeline-item';
        item.innerHTML = [
          '<div class="timeline-dot">' + (idx + 1) + '</div>',
          '<div class="timeline-content"><div class="small">' + action + '</div></div>'
        ].join('');
        timelineView.appendChild(item);
      });
    }

    // Comparison view
    function showCompareView() {
      const selected = Object.keys(selections).filter(k => k !== '_notes');
      if (selected.length === 0) {
        showTempToast('Select at least one option first');
        return;
      }
      document.getElementById('cardsWrap').classList.add('hidden');
      document.getElementById('explorer').classList.add('hidden');
      document.getElementById('compareView').classList.remove('hidden');
      const compareGrid = document.getElementById('compareGrid');
      compareGrid.innerHTML = '';
      selected.forEach(id => {
        const opt = OPTIONS.find(o => o.id === id);
        if (!opt) return;
        const card = document.createElement('div');
        card.className = 'compare-card';
        card.innerHTML = [
          '<h3 style="margin:0 0 8px 0">' + opt.title + '</h3>',
          '<div class="small" style="margin-bottom:12px">' + opt.short + '</div>',
          '<div style="margin-bottom:8px"><strong style="font-size:13px">Pros:</strong><ul class="small" style="margin:4px 0">' + opt.pros.slice(0,3).map(p => '<li>' + p + '</li>').join('') + '</ul></div>',
          '<div><strong style="font-size:13px">Cons:</strong><ul class="small" style="margin:4px 0">' + opt.cons.slice(0,3).map(p => '<li>' + p + '</li>').join('') + '</ul></div>'
        ].join('');
        compareGrid.appendChild(card);
      });
    }

    // Share functionality
    function shareOption(opt) {
      const text = opt.title + "\\n\\n" + opt.short + "\\n\\nPros: " + opt.pros.join(', ') + "\\nCons: " + opt.cons.join(', ') + "\\n\\nNext steps:\\n" + opt.actions.map((a,i) => (i+1) + '. ' + a).join('\\n');
      if (navigator.share) {
        navigator.share({title: opt.title, text: text}).catch(() => {});
      } else {
        copyToClipboard(text);
        showTempToast('Copied to clipboard!');
      }
    }

    // Export/Import
    function exportCSV() {
      const rows = [['ID', 'Title', 'Type', 'Status']];
      Object.keys(selections).forEach(k => {
        if (k === '_notes') return;
        const o = OPTIONS.find(x => x.id === k);
        if (o) rows.push([o.id, o.title, o.type, selections[k]]);
      });
      if (rows.length === 1) {
        showTempToast('No selections to export');
        return;
      }
      const csv = rows.map(r => r.map(c => '"' + String(c).replace(/"/g, '""') + '"').join(',')).join('\\n');
      const blob = new Blob([csv], {type: 'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'prarthna_selections.csv';
      a.click();
      URL.revokeObjectURL(url);
      showTempToast('CSV exported!');
    }

    function exportJSON() {
      const data = JSON.stringify(selections, null, 2);
      const blob = new Blob([data], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'prarthna_selections.json';
      a.click();
      URL.revokeObjectURL(url);
      showTempToast('JSON exported!');
    }

    function importJSON() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'application/json';
      input.onchange = () => {
        const f = input.files[0];
        if (!f) return;
        const reader = new FileReader();
        reader.onload = e => {
          try {
            const obj = JSON.parse(e.target.result);
            selections = obj;
            save();
            renderCards();
            renderDashboard();
            showTempToast('Import successful!');
          } catch(err) {
            showTempToast('Invalid JSON file');
          }
        };
        reader.readAsText(f);
      };
      input.click();
    }

    // Utilities
    function showTempToast(msg) {
      const existing = document.querySelector('.toast');
      if (existing) existing.remove();
      const el = document.createElement('div');
      el.className = 'toast';
      el.textContent = msg;
      document.body.appendChild(el);
      setTimeout(() => {
        el.style.opacity = '0';
        setTimeout(() => el.remove(), 300);
      }, 2000);
    }

    function copyToClipboard(text) {
      if (navigator.clipboard) {
        navigator.clipboard.writeText(text);
      } else {
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
      }
    }

    // Event listeners
    function init() {
      initTheme();
      initSwipeGestures();
      renderCards();
      renderDashboard();

      document.getElementById('startBtn').addEventListener('click', () => {
        document.getElementById('landing').classList.add('hidden');
        document.getElementById('main').classList.remove('hidden');
        window.scrollTo({top: 0, behavior: 'smooth'});
      });

      document.getElementById('beginBtn').addEventListener('click', () => {
        showExplorer();
      });

      document.getElementById('skipBtn').addEventListener('click', () => {
        document.getElementById('landing').classList.add('hidden');
        document.getElementById('main').classList.remove('hidden');
      });

      document.getElementById('resetBtn').addEventListener('click', () => {
        if (confirm('Reset all your selections?')) {
          localStorage.removeItem(KEY);
          selections = {};
          renderCards();
          renderDashboard();
          showTempToast('Reset complete');
        }
      });

      document.getElementById('importBtn').addEventListener('click', importJSON);
      document.getElementById('exportBtn').addEventListener('click', exportCSV);
      document.getElementById('exportJsonBtn').addEventListener('click', exportJSON);

      document.getElementById('clearBtn').addEventListener('click', () => {
        if (confirm('Clear all selections?')) {
          selections = {};
          save();
          renderCards();
          renderDashboard();
          showTempToast('All cleared');
        }
      });

      document.getElementById('viewListBtn').addEventListener('click', () => {
        document.getElementById('cardsWrap').classList.remove('hidden');
        document.getElementById('explorer').classList.add('hidden');
        document.getElementById('compareView').classList.add('hidden');
      });

      document.getElementById('compareBtn').addEventListener('click', showCompareView);

      document.getElementById('closeCompare').addEventListener('click', () => {
        document.getElementById('compareView').classList.add('hidden');
        document.getElementById('cardsWrap').classList.remove('hidden');
      });

      document.getElementById('startExplorerBtn').addEventListener('click', showExplorer);
      document.getElementById('search').addEventListener('input', e => {
        renderCards(e.target.value);
      });

      document.getElementById('nextBtn').addEventListener('click', () => {
        if (explorerIndex < OPTIONS.length - 1) {
          explorerIndex++;
          showExplorerCard();
        }
      });

      document.getElementById('prevBtn').addEventListener('click', () => {
        if (explorerIndex > 0) {
          explorerIndex--;
          showExplorerCard();
        }
      });

      document.getElementById('markInterest').addEventListener('click', () => {
        const id = OPTIONS[explorerIndex].id;
        selections[id] = 'interested';
        save();
        showTempToast('‚òÖ Marked as Interested');
        renderDashboard();
      });

      document.getElementById('markReview').addEventListener('click', () => {
        const id = OPTIONS[explorerIndex].id;
        selections[id] = 'review';
        save();
        showTempToast('üìã Marked for Review');
        renderDashboard();
      });
    }

    // Initialize app
    init();
  </script>
</body>
</html>
